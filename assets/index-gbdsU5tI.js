import{ac as S,A as C,ad as E,ae as H,v as O,af as W,M as B,ag as F,V as q}from"./three.core-B3YQPlt7.js";import{G,A as z}from"./three.examples-DlYl5ce3.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const e of t.addedNodes)e.tagName==="LINK"&&e.rel==="modulepreload"&&l(e)}).observe(document,{childList:!0,subtree:!0});function p(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerPolicy&&(t.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?t.credentials="include":n.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function l(n){if(n.ep)return;n.ep=!0;const t=p(n);fetch(n.href,t)}})();let v,w,f,o,x,c,b=null,T=!1,R,M,P=!1,A={flask:!1,tube:!1,glassBottle:!1};D();function D(){const h=new G().setPath("/RAUG-AR-Cahet-Codron/assets/models/");v=document.createElement("div"),document.body.appendChild(v),f=new S,w=new C(70,window.innerWidth/window.innerHeight,.01,20);const a=new E(16777215,12303359,3);a.position.set(.5,1,.25),f.add(a),o=new H({antialias:!0,alpha:!0}),o.setPixelRatio(window.devicePixelRatio),o.setSize(window.innerWidth,window.innerHeight),o.setAnimationLoop(k),o.xr.enabled=!0,v.appendChild(o.domElement),document.body.appendChild(z.createButton(o,{requiredFeatures:["hit-test"]}));function p(){if(c.visible){let e,s,i;R?M?P||h.load("glass-bottle.glb",r=>{e=r.scene,s=.04,i="glassBottle",t(e,s,i)}):h.load("tube.glb",r=>{e=r.scene,s=.1,i="tube",t(e,s,i)}):h.load("flask.glb",r=>{e=r.scene,s=.1,i="flask",t(e,s,i)})}function t(e,s,i){switch(c.matrix.decompose(e.position,e.quaternion,e.scale),e.scale.set(s,s,s),e.userData.type=i,f.add(e),i){case"flask":R=!0;break;case"tube":M=!0;break;case"glassBottle":P=!0;break}e.traverse(function(r){r.isMesh&&(r.castShadow=!0)})}}function l(t){if(t.preventDefault(),!o.xr.isPresenting)return;const e=t.touches[0],s=e.clientX/window.innerWidth*2-1,i=-(e.clientY/window.innerHeight)*2+1,r=new F,g=new q(s,i);r.setFromCamera(g,w);const m=r.intersectObjects(f.children,!0);if(m.length>0){const d=m[0].object.parent;if(d.userData.type){const u=d.userData.type;A[u]||(console.log("Touched",u),n(d,d.scale.x),A[u]=!0)}}}function n(t,e,s=3e3,i=100,r=.01){const g=performance.now();let m=g;function d(){const u=performance.now(),L=u-g;if(L<s){if(u-m>=i){m=u;const y=e+r*Math.sin(L/1e3*i*2*Math.PI);t.scale.set(y,y,y)}requestAnimationFrame(d)}else t.scale.set(e,e,e)}d()}window.addEventListener("touchmove",l,{passive:!1}),x=o.xr.getController(0),x.addEventListener("select",p),f.add(x),c=new O(new W(.15,.2,32).rotateX(-Math.PI/2),new B),c.matrixAutoUpdate=!1,c.visible=!1,f.add(c),window.addEventListener("resize",j)}function j(){w.aspect=window.innerWidth/window.innerHeight,w.updateProjectionMatrix(),o.setSize(window.innerWidth,window.innerHeight)}function k(h,a){if(a){const p=o.xr.getReferenceSpace(),l=o.xr.getSession();if(T===!1&&(l.requestReferenceSpace("viewer").then(function(n){l.requestHitTestSource({space:n}).then(function(t){b=t})}),l.addEventListener("end",function(){T=!1,b=null}),T=!0),b){const n=a.getHitTestResults(b);if(n.length){const t=n[0];c.visible=!0,c.matrix.fromArray(t.getPose(p).transform.matrix)}else c.visible=!1}}o.render(f,w)}
//# sourceMappingURL=index-gbdsU5tI.js.map
