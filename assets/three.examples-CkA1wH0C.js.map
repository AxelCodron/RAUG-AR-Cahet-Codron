{"version":3,"file":"three.examples-CkA1wH0C.js","sources":["../../node_modules/three/examples/jsm/webxr/ARButton.js"],"sourcesContent":["class ARButton {\n\n\tstatic createButton( renderer, sessionInit = {} ) {\n\n\t\tconst button = document.createElement( 'button' );\n\n\t\tfunction showStartAR( /*device*/ ) {\n\n\t\t\tif ( sessionInit.domOverlay === undefined ) {\n\n\t\t\t\tconst overlay = document.createElement( 'div' );\n\t\t\t\toverlay.style.display = 'none';\n\t\t\t\tdocument.body.appendChild( overlay );\n\n\t\t\t\tconst svg = document.createElementNS( 'http://www.w3.org/2000/svg', 'svg' );\n\t\t\t\tsvg.setAttribute( 'width', 38 );\n\t\t\t\tsvg.setAttribute( 'height', 38 );\n\t\t\t\tsvg.style.position = 'absolute';\n\t\t\t\tsvg.style.right = '20px';\n\t\t\t\tsvg.style.top = '20px';\n\t\t\t\tsvg.addEventListener( 'click', function () {\n\n\t\t\t\t\tcurrentSession.end();\n\n\t\t\t\t} );\n\t\t\t\toverlay.appendChild( svg );\n\n\t\t\t\tconst path = document.createElementNS( 'http://www.w3.org/2000/svg', 'path' );\n\t\t\t\tpath.setAttribute( 'd', 'M 12,12 L 28,28 M 28,12 12,28' );\n\t\t\t\tpath.setAttribute( 'stroke', '#fff' );\n\t\t\t\tpath.setAttribute( 'stroke-width', 2 );\n\t\t\t\tsvg.appendChild( path );\n\n\t\t\t\tif ( sessionInit.optionalFeatures === undefined ) {\n\n\t\t\t\t\tsessionInit.optionalFeatures = [];\n\n\t\t\t\t}\n\n\t\t\t\tsessionInit.optionalFeatures.push( 'dom-overlay' );\n\t\t\t\tsessionInit.domOverlay = { root: overlay };\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tlet currentSession = null;\n\n\t\t\tasync function onSessionStarted( session ) {\n\n\t\t\t\tsession.addEventListener( 'end', onSessionEnded );\n\n\t\t\t\trenderer.xr.setReferenceSpaceType( 'local' );\n\n\t\t\t\tawait renderer.xr.setSession( session );\n\n\t\t\t\tbutton.textContent = 'STOP AR';\n\t\t\t\tsessionInit.domOverlay.root.style.display = '';\n\n\t\t\t\tcurrentSession = session;\n\n\t\t\t}\n\n\t\t\tfunction onSessionEnded( /*event*/ ) {\n\n\t\t\t\tcurrentSession.removeEventListener( 'end', onSessionEnded );\n\n\t\t\t\tbutton.textContent = 'START AR';\n\t\t\t\tsessionInit.domOverlay.root.style.display = 'none';\n\n\t\t\t\tcurrentSession = null;\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tbutton.style.display = '';\n\n\t\t\tbutton.style.cursor = 'pointer';\n\t\t\tbutton.style.left = 'calc(50% - 50px)';\n\t\t\tbutton.style.width = '100px';\n\n\t\t\tbutton.textContent = 'START AR';\n\n\t\t\tbutton.onmouseenter = function () {\n\n\t\t\t\tbutton.style.opacity = '1.0';\n\n\t\t\t};\n\n\t\t\tbutton.onmouseleave = function () {\n\n\t\t\t\tbutton.style.opacity = '0.5';\n\n\t\t\t};\n\n\t\t\tbutton.onclick = function () {\n\n\t\t\t\tif ( currentSession === null ) {\n\n\t\t\t\t\tnavigator.xr.requestSession( 'immersive-ar', sessionInit ).then( onSessionStarted );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcurrentSession.end();\n\n\t\t\t\t\tif ( navigator.xr.offerSession !== undefined ) {\n\n\t\t\t\t\t\tnavigator.xr.offerSession( 'immersive-ar', sessionInit )\n\t\t\t\t\t\t\t.then( onSessionStarted )\n\t\t\t\t\t\t\t.catch( ( err ) => {\n\n\t\t\t\t\t\t\t\tconsole.warn( err );\n\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t\tif ( navigator.xr.offerSession !== undefined ) {\n\n\t\t\t\tnavigator.xr.offerSession( 'immersive-ar', sessionInit )\n\t\t\t\t\t.then( onSessionStarted )\n\t\t\t\t\t.catch( ( err ) => {\n\n\t\t\t\t\t\tconsole.warn( err );\n\n\t\t\t\t\t} );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction disableButton() {\n\n\t\t\tbutton.style.display = '';\n\n\t\t\tbutton.style.cursor = 'auto';\n\t\t\tbutton.style.left = 'calc(50% - 75px)';\n\t\t\tbutton.style.width = '150px';\n\n\t\t\tbutton.onmouseenter = null;\n\t\t\tbutton.onmouseleave = null;\n\n\t\t\tbutton.onclick = null;\n\n\t\t}\n\n\t\tfunction showARNotSupported() {\n\n\t\t\tdisableButton();\n\n\t\t\tbutton.textContent = 'AR NOT SUPPORTED';\n\n\t\t}\n\n\t\tfunction showARNotAllowed( exception ) {\n\n\t\t\tdisableButton();\n\n\t\t\tconsole.warn( 'Exception when trying to call xr.isSessionSupported', exception );\n\n\t\t\tbutton.textContent = 'AR NOT ALLOWED';\n\n\t\t}\n\n\t\tfunction stylizeElement( element ) {\n\n\t\t\telement.style.position = 'absolute';\n\t\t\telement.style.bottom = '20px';\n\t\t\telement.style.padding = '12px 6px';\n\t\t\telement.style.border = '1px solid #fff';\n\t\t\telement.style.borderRadius = '4px';\n\t\t\telement.style.background = 'rgba(0,0,0,0.1)';\n\t\t\telement.style.color = '#fff';\n\t\t\telement.style.font = 'normal 13px sans-serif';\n\t\t\telement.style.textAlign = 'center';\n\t\t\telement.style.opacity = '0.5';\n\t\t\telement.style.outline = 'none';\n\t\t\telement.style.zIndex = '999';\n\n\t\t}\n\n\t\tif ( 'xr' in navigator ) {\n\n\t\t\tbutton.id = 'ARButton';\n\t\t\tbutton.style.display = 'none';\n\n\t\t\tstylizeElement( button );\n\n\t\t\tnavigator.xr.isSessionSupported( 'immersive-ar' ).then( function ( supported ) {\n\n\t\t\t\tsupported ? showStartAR() : showARNotSupported();\n\n\t\t\t} ).catch( showARNotAllowed );\n\n\t\t\treturn button;\n\n\t\t} else {\n\n\t\t\tconst message = document.createElement( 'a' );\n\n\t\t\tif ( window.isSecureContext === false ) {\n\n\t\t\t\tmessage.href = document.location.href.replace( /^http:/, 'https:' );\n\t\t\t\tmessage.innerHTML = 'WEBXR NEEDS HTTPS'; // TODO Improve message\n\n\t\t\t} else {\n\n\t\t\t\tmessage.href = 'https://immersiveweb.dev/';\n\t\t\t\tmessage.innerHTML = 'WEBXR NOT AVAILABLE';\n\n\t\t\t}\n\n\t\t\tmessage.style.left = 'calc(50% - 90px)';\n\t\t\tmessage.style.width = '180px';\n\t\t\tmessage.style.textDecoration = 'none';\n\n\t\t\tstylizeElement( message );\n\n\t\t\treturn message;\n\n\t\t}\n\n\t}\n\n}\n\nexport { ARButton };\n"],"names":["ARButton","renderer","sessionInit","button","showStartAR","overlay","svg","currentSession","path","onSessionStarted","session","onSessionEnded","err","disableButton","showARNotSupported","showARNotAllowed","exception","stylizeElement","element","supported","message"],"mappings":"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","x_google_ignoreList":[0]}